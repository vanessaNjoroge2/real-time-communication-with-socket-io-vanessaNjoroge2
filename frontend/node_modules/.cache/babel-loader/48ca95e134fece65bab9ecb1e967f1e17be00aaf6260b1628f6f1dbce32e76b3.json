{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\user\\\\OneDrive\\\\Desktop\\\\PLP\\\\Mern Stack\\\\socket-io-chat-app\\\\frontend\\\\src\\\\pages\\\\Chat.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport useSocket from \"../hooks/useSocket\";\nimport ChatWindow from \"../components/ChatWindow\";\nimport NotificationToast from \"../components/NotificationToast\";\nimport { useAuth } from \"../contexts/AuthContext\";\nimport { useNavigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ChatPage = () => {\n  _s();\n  const {\n    user,\n    logout\n  } = useAuth();\n  const navigate = useNavigate();\n  const {\n    sendMessage,\n    onMessageReceived,\n    onUserStatusUpdate\n  } = useSocket(\"http://localhost:3001\");\n  const [messages, setMessages] = useState([]);\n  const [notifications, setNotifications] = useState([]);\n  useEffect(() => {\n    if (!user) {\n      navigate(\"/login\");\n      return;\n    }\n    onMessageReceived(message => {\n      setMessages(prev => [...prev, message]);\n    });\n    onUserStatusUpdate(status => {\n      setNotifications(prev => [...prev, `User ${status.username || status.userId} is ${status.online ? \"online\" : \"offline\"}`]);\n    });\n  }, [user, navigate, onMessageReceived, onUserStatusUpdate]);\n  const handleLogout = () => {\n    logout();\n    navigate(\"/login\");\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chat-page\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"chat-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Chat Application\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"user-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"Welcome, \", user === null || user === void 0 ? void 0 : user.username, \"!\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleLogout,\n          children: \"Logout\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ChatWindow, {\n      messages: messages,\n      sendMessage: sendMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }, this), notifications.map((notification, index) => /*#__PURE__*/_jsxDEV(NotificationToast, {\n      message: notification,\n      show: true,\n      onClose: () => setNotifications(prev => prev.filter((_, i) => i !== index))\n    }, index, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 9\n    }, this))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 5\n  }, this);\n};\n_s(ChatPage, \"KXDwrAytyT/UBOiOmuWadWKRW9c=\", false, function () {\n  return [useAuth, useNavigate, useSocket];\n});\n_c = ChatPage;\nexport default ChatPage;\nvar _c;\n$RefreshReg$(_c, \"ChatPage\");","map":{"version":3,"names":["React","useEffect","useState","useSocket","ChatWindow","NotificationToast","useAuth","useNavigate","jsxDEV","_jsxDEV","ChatPage","_s","user","logout","navigate","sendMessage","onMessageReceived","onUserStatusUpdate","messages","setMessages","notifications","setNotifications","message","prev","status","username","userId","online","handleLogout","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","map","notification","index","show","onClose","filter","_","i","_c","$RefreshReg$"],"sources":["C:/Users/user/OneDrive/Desktop/PLP/Mern Stack/socket-io-chat-app/frontend/src/pages/Chat.tsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport useSocket from \"../hooks/useSocket\";\r\nimport ChatWindow from \"../components/ChatWindow\";\r\nimport NotificationToast from \"../components/NotificationToast\";\r\nimport { useAuth } from \"../contexts/AuthContext\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nconst ChatPage: React.FC = () => {\r\n  const { user, logout } = useAuth();\r\n  const navigate = useNavigate();\r\n  const { sendMessage, onMessageReceived, onUserStatusUpdate } = useSocket(\r\n    \"http://localhost:3001\"\r\n  );\r\n  const [messages, setMessages] = useState<string[]>([]);\r\n  const [notifications, setNotifications] = useState<string[]>([]);\r\n\r\n  useEffect(() => {\r\n    if (!user) {\r\n      navigate(\"/login\");\r\n      return;\r\n    }\r\n\r\n    onMessageReceived((message: string) => {\r\n      setMessages((prev) => [...prev, message]);\r\n    });\r\n\r\n    onUserStatusUpdate(\r\n      (status: { userId: string; username?: string; online: boolean }) => {\r\n        setNotifications((prev) => [\r\n          ...prev,\r\n          `User ${status.username || status.userId} is ${\r\n            status.online ? \"online\" : \"offline\"\r\n          }`,\r\n        ]);\r\n      }\r\n    );\r\n  }, [user, navigate, onMessageReceived, onUserStatusUpdate]);\r\n\r\n  const handleLogout = () => {\r\n    logout();\r\n    navigate(\"/login\");\r\n  };\r\n\r\n  return (\r\n    <div className=\"chat-page\">\r\n      <header className=\"chat-header\">\r\n        <h1>Chat Application</h1>\r\n        <div className=\"user-info\">\r\n          <span>Welcome, {user?.username}!</span>\r\n          <button onClick={handleLogout}>Logout</button>\r\n        </div>\r\n      </header>\r\n      <ChatWindow messages={messages} sendMessage={sendMessage} />\r\n      {notifications.map((notification: string, index: number) => (\r\n        <NotificationToast\r\n          key={index}\r\n          message={notification}\r\n          show={true}\r\n          onClose={() =>\r\n            setNotifications((prev) => prev.filter((_, i) => i !== index))\r\n          }\r\n        />\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChatPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}