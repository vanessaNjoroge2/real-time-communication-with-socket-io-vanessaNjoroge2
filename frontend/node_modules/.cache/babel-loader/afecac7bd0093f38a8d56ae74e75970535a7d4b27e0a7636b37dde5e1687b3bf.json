{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\user\\\\OneDrive\\\\Desktop\\\\PLP\\\\Mern Stack\\\\socket-io-chat-app\\\\frontend\\\\src\\\\pages\\\\Chat.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport useSocket from \"../hooks/useSocket\";\nimport ChatWindow from \"../components/ChatWindow\";\nimport NotificationToast from \"../components/NotificationToast\";\nimport { useAuth } from \"../contexts/AuthContext\";\nimport { useNavigate } from \"react-router-dom\";\nimport \"../App.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ChatPage = () => {\n  _s();\n  const {\n    user,\n    logout\n  } = useAuth();\n  const navigate = useNavigate();\n  const {\n    sendMessage,\n    onMessageReceived,\n    onUserStatusUpdate\n  } = useSocket(\"http://localhost:3001\");\n  const [messages, setMessages] = useState([]);\n  const [notifications, setNotifications] = useState([]);\n  useEffect(() => {\n    if (!user) {\n      navigate(\"/login\");\n      return;\n    }\n    onMessageReceived(message => {\n      const newMessage = {\n        id: Date.now().toString(),\n        content: message.content || message,\n        senderId: message.senderId || \"other\",\n        timestamp: new Date(),\n        type: message.senderId === user.id ? \"sent\" : \"received\"\n      };\n      setMessages(prev => [...prev, newMessage]);\n    });\n    onUserStatusUpdate(status => {\n      const username = status.username || status.userId;\n      setNotifications(prev => [...prev, `${username} is ${status.online ? \"online ðŸŸ¢\" : \"offline âš«\"}`]);\n\n      // Auto-remove notification after 3 seconds\n      setTimeout(() => {\n        setNotifications(prev => prev.slice(1));\n      }, 3000);\n    });\n  }, [user, navigate, onMessageReceived, onUserStatusUpdate]);\n  const handleLogout = async () => {\n    await logout();\n    navigate(\"/login\");\n  };\n  const handleSendMessage = content => {\n    sendMessage(content);\n    const newMessage = {\n      id: Date.now().toString(),\n      content,\n      senderId: user.id,\n      timestamp: new Date(),\n      type: \"sent\"\n    };\n    setMessages(prev => [...prev, newMessage]);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chat-page\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"chat-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"\\uD83D\\uDCAC Chat Room\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"user-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"\\uD83D\\uDC64 \", user === null || user === void 0 ? void 0 : user.username]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleLogout,\n          children: \"Logout\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ChatWindow, {\n      messages: messages,\n      sendMessage: handleSendMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this), notifications.map((notification, index) => /*#__PURE__*/_jsxDEV(NotificationToast, {\n      message: notification,\n      show: true,\n      onClose: () => setNotifications(prev => prev.filter((_, i) => i !== index))\n    }, index, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 9\n    }, this))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 5\n  }, this);\n};\n_s(ChatPage, \"KXDwrAytyT/UBOiOmuWadWKRW9c=\", false, function () {\n  return [useAuth, useNavigate, useSocket];\n});\n_c = ChatPage;\nexport default ChatPage;\nvar _c;\n$RefreshReg$(_c, \"ChatPage\");","map":{"version":3,"names":["React","useEffect","useState","useSocket","ChatWindow","NotificationToast","useAuth","useNavigate","jsxDEV","_jsxDEV","ChatPage","_s","user","logout","navigate","sendMessage","onMessageReceived","onUserStatusUpdate","messages","setMessages","notifications","setNotifications","message","newMessage","id","Date","now","toString","content","senderId","timestamp","type","prev","status","username","userId","online","setTimeout","slice","handleLogout","handleSendMessage","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","map","notification","index","show","onClose","filter","_","i","_c","$RefreshReg$"],"sources":["C:/Users/user/OneDrive/Desktop/PLP/Mern Stack/socket-io-chat-app/frontend/src/pages/Chat.tsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport useSocket from \"../hooks/useSocket\";\r\nimport ChatWindow from \"../components/ChatWindow\";\r\nimport NotificationToast from \"../components/NotificationToast\";\r\nimport { useAuth } from \"../contexts/AuthContext\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport \"../App.css\";\r\n\r\ninterface Message {\r\n  id: string;\r\n  content: string;\r\n  senderId: string;\r\n  timestamp: Date;\r\n  type: \"sent\" | \"received\";\r\n}\r\n\r\nconst ChatPage: React.FC = () => {\r\n  const { user, logout } = useAuth();\r\n  const navigate = useNavigate();\r\n  const { sendMessage, onMessageReceived, onUserStatusUpdate } = useSocket(\r\n    \"http://localhost:3001\"\r\n  );\r\n  const [messages, setMessages] = useState<Message[]>([]);\r\n  const [notifications, setNotifications] = useState<string[]>([]);\r\n\r\n  useEffect(() => {\r\n    if (!user) {\r\n      navigate(\"/login\");\r\n      return;\r\n    }\r\n\r\n    onMessageReceived((message: any) => {\r\n      const newMessage: Message = {\r\n        id: Date.now().toString(),\r\n        content: message.content || message,\r\n        senderId: message.senderId || \"other\",\r\n        timestamp: new Date(),\r\n        type: message.senderId === user.id ? \"sent\" : \"received\",\r\n      };\r\n      setMessages((prev) => [...prev, newMessage]);\r\n    });\r\n\r\n    onUserStatusUpdate(\r\n      (status: { userId: string; username?: string; online: boolean }) => {\r\n        const username = status.username || status.userId;\r\n        setNotifications((prev) => [\r\n          ...prev,\r\n          `${username} is ${status.online ? \"online ðŸŸ¢\" : \"offline âš«\"}`,\r\n        ]);\r\n\r\n        // Auto-remove notification after 3 seconds\r\n        setTimeout(() => {\r\n          setNotifications((prev) => prev.slice(1));\r\n        }, 3000);\r\n      }\r\n    );\r\n  }, [user, navigate, onMessageReceived, onUserStatusUpdate]);\r\n\r\n  const handleLogout = async () => {\r\n    await logout();\r\n    navigate(\"/login\");\r\n  };\r\n\r\n  const handleSendMessage = (content: string) => {\r\n    sendMessage(content);\r\n    const newMessage: Message = {\r\n      id: Date.now().toString(),\r\n      content,\r\n      senderId: user!.id,\r\n      timestamp: new Date(),\r\n      type: \"sent\",\r\n    };\r\n    setMessages((prev) => [...prev, newMessage]);\r\n  };\r\n\r\n  return (\r\n    <div className=\"chat-page\">\r\n      <header className=\"chat-header\">\r\n        <h1>ðŸ’¬ Chat Room</h1>\r\n        <div className=\"user-info\">\r\n          <span>ðŸ‘¤ {user?.username}</span>\r\n          <button onClick={handleLogout}>Logout</button>\r\n        </div>\r\n      </header>\r\n      <ChatWindow messages={messages} sendMessage={handleSendMessage} />\r\n      {notifications.map((notification: string, index: number) => (\r\n        <NotificationToast\r\n          key={index}\r\n          message={notification}\r\n          show={true}\r\n          onClose={() =>\r\n            setNotifications((prev) => prev.filter((_, i) => i !== index))\r\n          }\r\n        />\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChatPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}